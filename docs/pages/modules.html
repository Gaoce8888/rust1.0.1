<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å—è¯¦è§£ - ä¼ä¸šçº§å®¢æœç³»ç»ŸæŠ€æœ¯æ–‡æ¡£</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/mobile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
</head>
<body>
    <div class="page-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>æŠ€æœ¯æ–‡æ¡£</h1>
                <p>ä¼ä¸šçº§å®¢æœç³»ç»Ÿ v1.0.0</p>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">æ¨¡å—è¯¦è§£</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#overview" class="nav-link active">æ¨¡å—æ¦‚è§ˆ</a>
                        </li>
                        <li class="nav-item">
                            <a href="#auth" class="nav-link">è®¤è¯æ¨¡å—</a>
                        </li>
                        <li class="nav-item">
                            <a href="#file" class="nav-link">æ–‡ä»¶ç®¡ç†</a>
                        </li>
                        <li class="nav-item">
                            <a href="#voice" class="nav-link">è¯­éŸ³æ¶ˆæ¯</a>
                        </li>
                        <li class="nav-item">
                            <a href="#template" class="nav-link">æ¨¡æ¿ç³»ç»Ÿ</a>
                        </li>
                        <li class="nav-item">
                            <a href="#ai" class="nav-link">AI å¤„ç†</a>
                        </li>
                        <li class="nav-item">
                            <a href="#websocket" class="nav-link">WebSocket</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header">
                <button class="menu-toggle">â˜°</button>
                <h1 class="header-title">æ¨¡å—è¯¦è§£</h1>
                <div class="header-actions">
                    <a href="../index.html" class="btn btn-secondary">è¿”å›é¦–é¡µ</a>
                </div>
            </header>

            <div class="content fade-in">
                <div class="doc-content">
                    <h1 class="doc-title">æ¨¡å—è¯¦è§£</h1>
                    <p class="doc-subtitle">æ·±å…¥äº†è§£æ¯ä¸ªåŠŸèƒ½æ¨¡å—çš„è®¾è®¡å’Œå®ç°</p>

                    <section id="overview">
                        <h2>æ¨¡å—æ¦‚è§ˆ</h2>
                        
                        <div class="grid grid-cols-2">
                            <div class="card">
                                <h3 class="card-title">ğŸ” è®¤è¯æ¨¡å—</h3>
                                <div class="card-content">
                                    <p>è´Ÿè´£ç”¨æˆ·èº«ä»½éªŒè¯ã€ä¼šè¯ç®¡ç†ã€æƒé™æ§åˆ¶ç­‰å®‰å…¨ç›¸å…³åŠŸèƒ½</p>
                                </div>
                            </div>
                            <div class="card">
                                <h3 class="card-title">ğŸ“ æ–‡ä»¶ç®¡ç†</h3>
                                <div class="card-content">
                                    <p>å¤„ç†æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€å­˜å‚¨ã€åˆ†ç±»ç­‰æ–‡ä»¶ç®¡ç†åŠŸèƒ½</p>
                                </div>
                            </div>
                            <div class="card">
                                <h3 class="card-title">ğŸ¤ è¯­éŸ³æ¶ˆæ¯</h3>
                                <div class="card-content">
                                    <p>å¤„ç†è¯­éŸ³æ–‡ä»¶çš„å½•åˆ¶ã€æ’­æ”¾ã€è½¬ç ã€å­˜å‚¨ç­‰åŠŸèƒ½</p>
                                </div>
                            </div>
                            <div class="card">
                                <h3 class="card-title">ğŸ¨ æ¨¡æ¿ç³»ç»Ÿ</h3>
                                <div class="card-content">
                                    <p>ç®¡ç†HTMLæ¨¡æ¿çš„åˆ›å»ºã€ç¼–è¾‘ã€æ¸²æŸ“å’Œç‰ˆæœ¬æ§åˆ¶</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="auth">
                        <h2>è®¤è¯æ¨¡å—</h2>
                        
                        <div class="card">
                            <h3 class="card-title">æ ¸å¿ƒåŠŸèƒ½</h3>
                            <div class="card-content">
                                <ul>
                                    <li>ç”¨æˆ·ç™»å½•è®¤è¯</li>
                                    <li>ä¼šè¯ç®¡ç†</li>
                                    <li>æƒé™æ§åˆ¶</li>
                                    <li>å®‰å…¨éªŒè¯ä¸­é—´ä»¶</li>
                                    <li>å¤šå› ç´ è®¤è¯æ”¯æŒ</li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">æŠ€æœ¯å®ç°</h3>
                            <div class="card-content">
                                <pre><code class="language-rust">// ç”¨æˆ·è®¤è¯ç»“æ„
pub struct UserManager {
    users: Vec&lt;User&gt;,
    file_path: String,
    redis_client: Client,
    session_ttl: i64,
}

// è®¤è¯ä¸­é—´ä»¶
pub async fn auth_middleware(
    req: Request,
    next: Next,
) -> Result&lt;Response, Rejection&gt; {
    let session_id = extract_session_id(&req)?;
    let user_info = validate_session(&session_id).await?;
    check_permissions(&user_info, &req.path())?;
    next.run(req).await
}</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="file">
                        <h2>æ–‡ä»¶ç®¡ç†</h2>
                        
                        <div class="card">
                            <h3 class="card-title">æ–‡ä»¶åˆ†ç±»</h3>
                            <div class="card-content">
                                <ul>
                                    <li><strong>images</strong>: å›¾ç‰‡æ–‡ä»¶ (jpg, png, gif, webp)</li>
                                    <li><strong>documents</strong>: æ–‡æ¡£æ–‡ä»¶ (pdf, doc, docx, txt)</li>
                                    <li><strong>audio</strong>: éŸ³é¢‘æ–‡ä»¶ (mp3, wav, m4a)</li>
                                    <li><strong>videos</strong>: è§†é¢‘æ–‡ä»¶ (mp4, avi, mov)</li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">å­˜å‚¨ç­–ç•¥</h3>
                            <div class="card-content">
                                <pre><code>data/
â”œâ”€â”€ blobs/
â”‚   â”œâ”€â”€ images/          # å›¾ç‰‡å­˜å‚¨
â”‚   â”œâ”€â”€ documents/       # æ–‡æ¡£å­˜å‚¨
â”‚   â”œâ”€â”€ audio/           # éŸ³é¢‘å­˜å‚¨
â”‚   â””â”€â”€ videos/          # è§†é¢‘å­˜å‚¨
â””â”€â”€ metadata/            # æ–‡ä»¶å…ƒæ•°æ®</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="voice">
                        <h2>è¯­éŸ³æ¶ˆæ¯</h2>
                        
                        <div class="card">
                            <h3 class="card-title">æ”¯æŒæ ¼å¼</h3>
                            <div class="card-content">
                                <ul>
                                    <li><strong>è¾“å…¥æ ¼å¼</strong>: MP3, WAV, M4A, OGG</li>
                                    <li><strong>è¾“å‡ºæ ¼å¼</strong>: MP3 (æ ‡å‡†åŒ–)</li>
                                    <li><strong>é‡‡æ ·ç‡</strong>: 16kHz, 22.05kHz, 44.1kHz</li>
                                    <li><strong>æ¯”ç‰¹ç‡</strong>: 64kbps, 128kbps, 320kbps</li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">å¤„ç†æµç¨‹</h3>
                            <div class="card-content">
                                <pre><code>1. æ¥æ”¶è¯­éŸ³æ–‡ä»¶
   â†“
2. æ ¼å¼éªŒè¯å’Œå®‰å…¨æ£€æŸ¥
   â†“
3. éŸ³é¢‘æ ¼å¼è½¬æ¢
   â†“
4. æ—¶é•¿è®¡ç®—å’Œè´¨é‡æ£€æŸ¥
   â†“
5. å­˜å‚¨åˆ°æŒ‡å®šç›®å½•
   â†“
6. ç”Ÿæˆè®¿é—®URL
   â†“
7. ä¿å­˜å…ƒæ•°æ®</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="template">
                        <h2>æ¨¡æ¿ç³»ç»Ÿ</h2>
                        
                        <div class="card">
                            <h3 class="card-title">æ¨¡æ¿åŠŸèƒ½</h3>
                            <div class="card-content">
                                <ul>
                                    <li>HTMLæ¨¡æ¿åˆ›å»ºå’Œç¼–è¾‘</li>
                                    <li>åŠ¨æ€å˜é‡æ›¿æ¢</li>
                                    <li>æ¡ä»¶æ¸²æŸ“æ”¯æŒ</li>
                                    <li>æ¨¡æ¿åˆ†ç±»ç®¡ç†</li>
                                    <li>ç‰ˆæœ¬æ§åˆ¶</li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">æ¨¡æ¿è¯­æ³•</h3>
                            <div class="card-content">
                                <pre><code class="language-html">&lt;!-- å˜é‡æ›¿æ¢ --&gt;
&lt;h1&gt;{{title}}&lt;/h1&gt;
&lt;p&gt;{{content}}&lt;/p&gt;

&lt;!-- æ¡ä»¶æ¸²æŸ“ --&gt;
{{#if user.is_vip}}
&lt;div class="vip-badge"&gt;VIPç”¨æˆ·&lt;/div&gt;
{{/if}}

&lt;!-- å¾ªç¯æ¸²æŸ“ --&gt;
{{#each items}}
&lt;div class="item"&gt;{{this.name}}&lt;/div&gt;
{{/each}}</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="ai">
                        <h2>AI å¤„ç†</h2>
                        
                        <div class="card">
                            <h3 class="card-title">AI æœåŠ¡</h3>
                            <div class="card-content">
                                <ul>
                                    <li><strong>æ„å›¾è¯†åˆ«</strong>: åˆ†æç”¨æˆ·æ¶ˆæ¯æ„å›¾</li>
                                    <li><strong>è¯­è¨€ç¿»è¯‘</strong>: å¤šè¯­è¨€ç¿»è¯‘æ”¯æŒ</li>
                                    <li><strong>æƒ…æ„Ÿåˆ†æ</strong>: åˆ†æç”¨æˆ·æƒ…ç»ª</li>
                                    <li><strong>æ™ºèƒ½å›å¤</strong>: è‡ªåŠ¨å›å¤æ¨è</li>
                                    <li><strong>è¯­éŸ³è¯†åˆ«</strong>: è¯­éŸ³è½¬æ–‡å­—</li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">ä»»åŠ¡é˜Ÿåˆ—</h3>
                            <div class="card-content">
                                <pre><code class="language-rust">// AIä»»åŠ¡ç±»å‹
pub enum AITaskType {
    IntentRecognition,
    Translation,
    SentimentAnalysis,
    SpeechRecognition,
    SmartReply,
}

// AIä»»åŠ¡ç»“æ„
pub struct AITask {
    pub id: String,
    pub task_type: AITaskType,
    pub user_id: String,
    pub message_id: String,
    pub input_data: serde_json::Value,
    pub priority: u8,
    pub status: TaskStatus,
    pub created_at: DateTime&lt;Utc&gt;,
}</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="websocket">
                        <h2>WebSocket ç®¡ç†</h2>
                        
                        <div class="card">
                            <h3 class="card-title">è¿æ¥ç®¡ç†</h3>
                            <div class="card-content">
                                <ul>
                                    <li>WebSocketè¿æ¥å»ºç«‹å’Œç»´æŠ¤</li>
                                    <li>ç”¨æˆ·åœ¨çº¿çŠ¶æ€è·Ÿè¸ª</li>
                                    <li>æ¶ˆæ¯è·¯ç”±å’Œè½¬å‘</li>
                                    <li>å¹¿æ’­æ¶ˆæ¯æ”¯æŒ</li>
                                    <li>å¿ƒè·³æ£€æµ‹æœºåˆ¶</li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">æ¶ˆæ¯å¤„ç†</h3>
                            <div class="card-content">
                                <pre><code class="language-rust">// WebSocketæ¶ˆæ¯å¤„ç†
pub async fn handle_websocket_message(
    ws: WebSocket,
    user_id: String,
    user_type: UserType,
    ws_manager: Arc&lt;WebSocketManager&gt;,
) {
    // æ³¨å†Œç”¨æˆ·è¿æ¥
    ws_manager.register_user(user_id.clone(), user_type, ws.clone()).await;
    
    // å¤„ç†æ¶ˆæ¯
    while let Some(msg) = ws.next().await {
        match msg {
            Ok(Message::Text(text)) => {
                let message: ClientMessage = serde_json::from_str(&text)?;
                route_message(message, &ws_manager).await;
            }
            Ok(Message::Binary(bin)) => {
                handle_binary_message(bin, &ws_manager).await;
            }
            _ => {}
        }
    }
    
    // æ³¨é”€ç”¨æˆ·è¿æ¥
    ws_manager.unregister_user(&user_id).await;
}</code></pre>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>
    <script src="../assets/js/main.js"></script>
<script src="../assets/js/mobile.js"></script>
</body>
</html>
