<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éƒ¨ç½²æŒ‡å— - ä¼ä¸šçº§å®¢æœç³»ç»ŸæŠ€æœ¯æ–‡æ¡£</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/mobile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
</head>
<body>
    <div class="page-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>æŠ€æœ¯æ–‡æ¡£</h1>
                <p>ä¼ä¸šçº§å®¢æœç³»ç»Ÿ v1.0.0</p>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">éƒ¨ç½²è¿ç»´</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#overview" class="nav-link active">éƒ¨ç½²æ¦‚è§ˆ</a>
                        </li>
                        <li class="nav-item">
                            <a href="#requirements" class="nav-link">ç¯å¢ƒè¦æ±‚</a>
                        </li>
                        <li class="nav-item">
                            <a href="#manual" class="nav-link">æ‰‹åŠ¨éƒ¨ç½²</a>
                        </li>
                        <li class="nav-item">
                            <a href="#docker" class="nav-link">Docker éƒ¨ç½²</a>
                        </li>
                        <li class="nav-item">
                            <a href="#kubernetes" class="nav-link">Kubernetes</a>
                        </li>
                        <li class="nav-item">
                            <a href="#monitoring" class="nav-link">ç›‘æ§é…ç½®</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header">
                <button class="menu-toggle">â˜°</button>
                <h1 class="header-title">éƒ¨ç½²æŒ‡å—</h1>
                <div class="header-actions">
                    <a href="../index.html" class="btn btn-secondary">è¿”å›é¦–é¡µ</a>
                </div>
            </header>

            <div class="content fade-in">
                <div class="doc-content">
                    <h1 class="doc-title">éƒ¨ç½²æŒ‡å—</h1>
                    <p class="doc-subtitle">ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å’Œè¿ç»´æŒ‡å—</p>

                    <section id="overview">
                        <h2>éƒ¨ç½²æ¦‚è§ˆ</h2>
                        
                        <div class="alert alert-info">
                            <div class="alert-title">ğŸš€ éƒ¨ç½²é€‰é¡¹</div>
                            <p>ç³»ç»Ÿæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼Œæ ¹æ®æ‚¨çš„éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„éƒ¨ç½²æ–¹æ¡ˆã€‚</p>
                        </div>

                        <div class="grid grid-cols-3">
                            <div class="card">
                                <h3 class="card-title">ğŸ–¥ï¸ ä¼ ç»Ÿéƒ¨ç½²</h3>
                                <div class="card-content">
                                    <p>ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œé€‚åˆå°è§„æ¨¡åº”ç”¨</p>
                                    <ul>
                                        <li>ç®€å•ç›´æ¥</li>
                                        <li>èµ„æºåˆ©ç”¨ç‡é«˜</li>
                                        <li>æ˜“äºè°ƒè¯•</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card">
                                <h3 class="card-title">ğŸ³ Docker éƒ¨ç½²</h3>
                                <div class="card-content">
                                    <p>ä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²ï¼Œé€‚åˆä¸­ç­‰è§„æ¨¡åº”ç”¨</p>
                                    <ul>
                                        <li>ç¯å¢ƒä¸€è‡´æ€§</li>
                                        <li>æ˜“äºæ‰©å±•</li>
                                        <li>å¿«é€Ÿéƒ¨ç½²</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card">
                                <h3 class="card-title">â˜¸ï¸ Kubernetes</h3>
                                <div class="card-content">
                                    <p>ä½¿ç”¨ K8s ç¼–æ’ï¼Œé€‚åˆå¤§è§„æ¨¡ä¼ä¸šåº”ç”¨</p>
                                    <ul>
                                        <li>è‡ªåŠ¨ä¼¸ç¼©</li>
                                        <li>é«˜å¯ç”¨æ€§</li>
                                        <li>æœåŠ¡å‘ç°</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="requirements">
                        <h2>ç¯å¢ƒè¦æ±‚</h2>
                        
                        <div class="card">
                            <h3 class="card-title">ç¡¬ä»¶è¦æ±‚</h3>
                            <div class="card-content">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>è§„æ¨¡</th>
                                            <th>CPU</th>
                                            <th>å†…å­˜</th>
                                            <th>å­˜å‚¨</th>
                                            <th>ç½‘ç»œ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>å°å‹ (100ç”¨æˆ·)</td>
                                            <td>2æ ¸</td>
                                            <td>4GB</td>
                                            <td>20GB</td>
                                            <td>10Mbps</td>
                                        </tr>
                                        <tr>
                                            <td>ä¸­å‹ (1000ç”¨æˆ·)</td>
                                            <td>4æ ¸</td>
                                            <td>8GB</td>
                                            <td>100GB</td>
                                            <td>100Mbps</td>
                                        </tr>
                                        <tr>
                                            <td>å¤§å‹ (10000ç”¨æˆ·)</td>
                                            <td>8æ ¸</td>
                                            <td>16GB</td>
                                            <td>500GB</td>
                                            <td>1Gbps</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">è½¯ä»¶è¦æ±‚</h3>
                            <div class="card-content">
                                <ul>
                                    <li><strong>æ“ä½œç³»ç»Ÿ</strong>: Linux (Ubuntu 20.04+, CentOS 8+)</li>
                                    <li><strong>Rust</strong>: 1.70.0 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
                                    <li><strong>Redis</strong>: 6.0 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
                                    <li><strong>Node.js</strong>: 16.0 æˆ–æ›´é«˜ç‰ˆæœ¬ (å‰ç«¯æ„å»º)</li>
                                    <li><strong>Nginx</strong>: 1.18 æˆ–æ›´é«˜ç‰ˆæœ¬ (å¯é€‰)</li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <section id="manual">
                        <h2>æ‰‹åŠ¨éƒ¨ç½²</h2>
                        
                        <div class="card">
                            <h3 class="card-title">1. ç¯å¢ƒå‡†å¤‡</h3>
                            <div class="card-content">
                                <pre><code class="language-bash"># æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…å¿…è¦è½¯ä»¶
sudo apt install -y curl git build-essential

# å®‰è£… Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

# å®‰è£… Redis
sudo apt install -y redis-server
sudo systemctl enable redis-server
sudo systemctl start redis-server

# å®‰è£… Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs</code></pre>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">2. ä¸‹è½½å’Œæ„å»º</h3>
                            <div class="card-content">
                                <pre><code class="language-bash"># å…‹éš†ä»£ç 
git clone https://github.com/your-org/customer-service-system.git
cd customer-service-system

# æ„å»ºåç«¯
cargo build --release

# æ„å»ºå‰ç«¯
cd frontend
npm install
npm run build
cd ..</code></pre>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">3. é…ç½®æ–‡ä»¶</h3>
                            <div class="card-content">
                                <pre><code class="language-bash"># å¤åˆ¶é…ç½®æ–‡ä»¶
cp config/app-config.example.json config/app-config.json
cp config/secrets.example.env config/secrets.env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano config/app-config.json</code></pre>
                                
                                <p>é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
                                <pre><code class="language-json">{
  "server": {
    "host": "0.0.0.0",
    "port": 8080
  },
  "redis": {
    "host": "127.0.0.1",
    "port": 6379,
    "password": ""
  },
  "upload": {
    "max_file_size": 10485760,
    "upload_path": "./data/uploads"
  },
  "log": {
    "level": "info",
    "file": "./logs/app.log"
  }
}</code></pre>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">4. å¯åŠ¨æœåŠ¡</h3>
                            <div class="card-content">
                                <pre><code class="language-bash"># åˆ›å»ºç³»ç»ŸæœåŠ¡
sudo tee /etc/systemd/system/customer-service.service > /dev/null <<EOF
[Unit]
Description=Customer Service System
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/customer-service-system
ExecStart=/home/ubuntu/customer-service-system/target/release/customer-service-system
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable customer-service
sudo systemctl start customer-service

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status customer-service</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="docker">
                        <h2>Docker éƒ¨ç½²</h2>
                        
                        <div class="card">
                            <h3 class="card-title">1. Dockerfile</h3>
                            <div class="card-content">
                                <pre><code class="language-dockerfile"># å¤šé˜¶æ®µæ„å»º
FROM rust:1.70 AS builder

WORKDIR /app
COPY . .
RUN cargo build --release

FROM ubuntu:22.04

# å®‰è£…è¿è¡Œæ—¶ä¾èµ–
RUN apt-get update && apt-get install -y \
    ca-certificates \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶
COPY --from=builder /app/target/release/customer-service-system /usr/local/bin/

# å¤åˆ¶é…ç½®æ–‡ä»¶
COPY config/ /app/config/

# åˆ›å»ºæ•°æ®ç›®å½•
RUN mkdir -p /app/data /app/logs

WORKDIR /app

EXPOSE 8080

CMD ["customer-service-system"]</code></pre>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">2. docker-compose.yml</h3>
                            <div class="card-content">
                                <pre><code class="language-yaml">version: '3.8'

services:
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes

  customer-service:
    build: .
    ports:
      - "8080:8080"
    depends_on:
      - redis
    environment:
      - REDIS_HOST=redis
      - REDIS_PORT=6379
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
      - ./config:/app/config
    restart: unless-stopped

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    depends_on:
      - customer-service
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/ssl
    restart: unless-stopped

volumes:
  redis_data:</code></pre>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">3. éƒ¨ç½²å‘½ä»¤</h3>
                            <div class="card-content">
                                <pre><code class="language-bash"># æ„å»ºé•œåƒ
docker build -t customer-service:latest .

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f customer-service

# åœæ­¢æœåŠ¡
docker-compose down</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="kubernetes">
                        <h2>Kubernetes éƒ¨ç½²</h2>
                        
                        <div class="card">
                            <h3 class="card-title">1. éƒ¨ç½²æ–‡ä»¶</h3>
                            <div class="card-content">
                                <pre><code class="language-yaml"># deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: customer-service
spec:
  replicas: 3
  selector:
    matchLabels:
      app: customer-service
  template:
    metadata:
      labels:
        app: customer-service
    spec:
      containers:
      - name: customer-service
        image: customer-service:latest
        ports:
        - containerPort: 8080
        env:
        - name: REDIS_HOST
          value: "redis-service"
        - name: REDIS_PORT
          value: "6379"
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5

---
apiVersion: v1
kind: Service
metadata:
  name: customer-service
spec:
  selector:
    app: customer-service
  ports:
  - port: 8080
    targetPort: 8080
  type: ClusterIP</code></pre>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">2. Redis éƒ¨ç½²</h3>
                            <div class="card-content">
                                <pre><code class="language-yaml"># redis.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis
spec:
  replicas: 1
  selector:
    matchLabels:
      app: redis
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
      - name: redis
        image: redis:7-alpine
        ports:
        - containerPort: 6379
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"
            cpu: "200m"

---
apiVersion: v1
kind: Service
metadata:
  name: redis-service
spec:
  selector:
    app: redis
  ports:
  - port: 6379
    targetPort: 6379
  type: ClusterIP</code></pre>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">3. éƒ¨ç½²å‘½ä»¤</h3>
                            <div class="card-content">
                                <pre><code class="language-bash"># éƒ¨ç½² Redis
kubectl apply -f redis.yaml

# éƒ¨ç½²åº”ç”¨
kubectl apply -f deployment.yaml

# æŸ¥çœ‹çŠ¶æ€
kubectl get pods
kubectl get services

# æŸ¥çœ‹æ—¥å¿—
kubectl logs -f deployment/customer-service

# æ‰©ç¼©å®¹
kubectl scale deployment customer-service --replicas=5</code></pre>
                            </div>
                        </div>
                    </section>

                    <section id="monitoring">
                        <h2>ç›‘æ§é…ç½®</h2>
                        
                        <div class="card">
                            <h3 class="card-title">ç³»ç»Ÿç›‘æ§</h3>
                            <div class="card-content">
                                <ul>
                                    <li><strong>CPU ä½¿ç”¨ç‡</strong>: ç›‘æ§å¤„ç†å™¨è´Ÿè½½</li>
                                    <li><strong>å†…å­˜ä½¿ç”¨ç‡</strong>: ç›‘æ§å†…å­˜å ç”¨</li>
                                    <li><strong>ç£ç›˜ç©ºé—´</strong>: ç›‘æ§å­˜å‚¨ç©ºé—´</li>
                                    <li><strong>ç½‘ç»œæµé‡</strong>: ç›‘æ§ç½‘ç»œä½¿ç”¨</li>
                                    <li><strong>è¿›ç¨‹çŠ¶æ€</strong>: ç›‘æ§æœåŠ¡è¿è¡ŒçŠ¶æ€</li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">åº”ç”¨ç›‘æ§</h3>
                            <div class="card-content">
                                <ul>
                                    <li><strong>è¯·æ±‚å“åº”æ—¶é—´</strong>: API æ€§èƒ½ç›‘æ§</li>
                                    <li><strong>å¹¶å‘è¿æ¥æ•°</strong>: WebSocket è¿æ¥æ•°</li>
                                    <li><strong>é”™è¯¯ç‡</strong>: é”™è¯¯è¯·æ±‚ç»Ÿè®¡</li>
                                    <li><strong>æ•°æ®åº“è¿æ¥</strong>: Redis è¿æ¥çŠ¶æ€</li>
                                    <li><strong>æ–‡ä»¶ä¸Šä¼ </strong>: æ–‡ä»¶å¤„ç†ç»Ÿè®¡</li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="card-title">æ—¥å¿—é…ç½®</h3>
                            <div class="card-content">
                                <pre><code class="language-bash"># é…ç½®æ—¥å¿—è½®è½¬
sudo tee /etc/logrotate.d/customer-service > /dev/null <<EOF
/app/logs/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 0644 ubuntu ubuntu
    postrotate
        sudo systemctl reload customer-service
    endscript
}
EOF</code></pre>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>
    <script src="../assets/js/main.js"></script>
<script src="../assets/js/mobile.js"></script>
</body>
</html>