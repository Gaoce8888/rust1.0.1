<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>认证API - 客服系统</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/prism.css">
    <link rel="icon" href="../assets/images/favicon.ico" type="image/x-icon">
    <meta name="description" content="客服系统认证API文档，包含登录、登出、会话管理等接口">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="../assets/images/logo.png" alt="客服系统" class="logo-img">
                <span class="logo-text">客服系统 v1.3.0</span>
            </div>
            <div class="nav-menu">
                <a href="../index.html" class="nav-link">首页</a>
                <a href="index.html" class="nav-link active">API文档</a>
                <a href="../user-guide/index.html" class="nav-link">用户指南</a>
                <a href="../technical/index.html" class="nav-link">技术文档</a>
                <a href="../deployment/index.html" class="nav-link">部署指南</a>
            </div>
            <div class="nav-search">
                <input type="text" id="searchInput" placeholder="搜索API..." class="search-input">
                <button class="search-btn" onclick="searchDocs()">🔍</button>
            </div>
            <div class="nav-toggle" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="main-content">
        <!-- 页面头部 -->
        <section class="page-header">
            <div class="container">
                <div class="breadcrumb">
                    <a href="../index.html">首页</a>
                    <span class="breadcrumb-separator">/</span>
                    <a href="index.html">API文档</a>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-current">认证API</span>
                </div>
                <h1 class="page-title">认证API</h1>
                <p class="page-subtitle">客服系统的认证和授权接口，包含登录、登出、会话管理等功能</p>
            </div>
        </section>

        <!-- API概览 -->
        <section class="api-overview">
            <div class="container">
                <h2 class="section-title">API概览</h2>
                
                <div class="api-stats">
                    <div class="api-stat-card">
                        <div class="api-stat-icon">🔐</div>
                        <div class="api-stat-number">4</div>
                        <div class="api-stat-label">认证接口</div>
                    </div>
                    <div class="api-stat-card">
                        <div class="api-stat-icon">⚡</div>
                        <div class="api-stat-number">&lt;100ms</div>
                        <div class="api-stat-label">响应时间</div>
                    </div>
                    <div class="api-stat-card">
                        <div class="api-stat-icon">🔒</div>
                        <div class="api-stat-number">HTTPS</div>
                        <div class="api-stat-label">安全传输</div>
                    </div>
                    <div class="api-stat-card">
                        <div class="api-stat-icon">📝</div>
                        <div class="api-stat-number">JSON</div>
                        <div class="api-stat-label">数据格式</div>
                    </div>
                </div>

                <div class="api-base-info">
                    <div class="base-url-card">
                        <h3>基础URL</h3>
                        <code class="base-url">https://api.kefu-system.com/v1</code>
                        <p>所有API请求都基于此基础URL</p>
                    </div>
                    
                    <div class="auth-info-card">
                        <h3>认证方式</h3>
                        <ul>
                            <li><strong>Session Token:</strong> 通过Cookie传递</li>
                            <li><strong>Authorization Header:</strong> Bearer Token</li>
                            <li><strong>API Key:</strong> 用于服务间通信</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- API接口列表 -->
        <section class="api-endpoints">
            <div class="container">
                <h2 class="section-title">接口列表</h2>
                
                <!-- 登录接口 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <div class="endpoint-method post">POST</div>
                        <div class="endpoint-path">/auth/login</div>
                        <div class="endpoint-name">客服登录</div>
                    </div>
                    
                    <div class="endpoint-content">
                        <div class="endpoint-description">
                            <p>客服人员登录系统，获取会话token</p>
                        </div>
                        
                        <div class="endpoint-details">
                            <div class="detail-section">
                                <h4>请求参数</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Request Body (JSON)</div>
                                    <pre><code class="language-json">{
  "username": "kefu001",
  "password": "123456",
  "captcha": "ABC123"
}</code></pre>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h4>响应示例</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Success Response (200)</div>
                                    <pre><code class="language-json">{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "kefu001",
      "name": "张三",
      "role": "kefu",
      "status": "online"
    },
    "expires_in": 3600
  }
}</code></pre>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h4>错误响应</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Error Response (401)</div>
                                    <pre><code class="language-json">{
  "code": 401,
  "message": "用户名或密码错误",
  "data": null
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 登出接口 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <div class="endpoint-method post">POST</div>
                        <div class="endpoint-path">/auth/logout</div>
                        <div class="endpoint-name">客服登出</div>
                    </div>
                    
                    <div class="endpoint-content">
                        <div class="endpoint-description">
                            <p>客服人员登出系统，清除会话信息</p>
                        </div>
                        
                        <div class="endpoint-details">
                            <div class="detail-section">
                                <h4>请求头</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Headers</div>
                                    <pre><code class="language-http">Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json</code></pre>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h4>响应示例</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Success Response (200)</div>
                                    <pre><code class="language-json">{
  "code": 200,
  "message": "登出成功",
  "data": null
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 验证会话接口 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <div class="endpoint-method get">GET</div>
                        <div class="endpoint-path">/auth/verify</div>
                        <div class="endpoint-name">验证会话</div>
                    </div>
                    
                    <div class="endpoint-content">
                        <div class="endpoint-description">
                            <p>验证当前会话是否有效，获取用户信息</p>
                        </div>
                        
                        <div class="endpoint-details">
                            <div class="detail-section">
                                <h4>请求头</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Headers</div>
                                    <pre><code class="language-http">Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code></pre>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h4>响应示例</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Success Response (200)</div>
                                    <pre><code class="language-json">{
  "code": 200,
  "message": "会话有效",
  "data": {
    "user": {
      "id": "kefu001",
      "name": "张三",
      "role": "kefu",
      "status": "online",
      "last_active": "2025-07-21T10:30:00Z"
    },
    "permissions": [
      "message:read",
      "message:write",
      "customer:view"
    ]
  }
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 刷新Token接口 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <div class="endpoint-method post">POST</div>
                        <div class="endpoint-path">/auth/refresh</div>
                        <div class="endpoint-name">刷新Token</div>
                    </div>
                    
                    <div class="endpoint-content">
                        <div class="endpoint-description">
                            <p>刷新即将过期的访问token</p>
                        </div>
                        
                        <div class="endpoint-details">
                            <div class="detail-section">
                                <h4>请求头</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Headers</div>
                                    <pre><code class="language-http">Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code></pre>
                                </div>
                            </div>
                            
                            <div class="detail-section">
                                <h4>响应示例</h4>
                                <div class="code-block-container">
                                    <div class="code-block-header">Success Response (200)</div>
                                    <pre><code class="language-json">{
  "code": 200,
  "message": "Token刷新成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expires_in": 3600
  }
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 错误码 -->
        <section class="error-codes">
            <div class="container">
                <h2 class="section-title">错误码</h2>
                
                <div class="error-table">
                    <table>
                        <thead>
                            <tr>
                                <th>错误码</th>
                                <th>错误信息</th>
                                <th>说明</th>
                                <th>解决方案</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>400</code></td>
                                <td>请求参数错误</td>
                                <td>请求参数格式不正确或缺少必要参数</td>
                                <td>检查请求参数格式和完整性</td>
                            </tr>
                            <tr>
                                <td><code>401</code></td>
                                <td>未授权</td>
                                <td>用户未登录或token无效</td>
                                <td>重新登录获取有效token</td>
                            </tr>
                            <tr>
                                <td><code>403</code></td>
                                <td>权限不足</td>
                                <td>用户没有执行该操作的权限</td>
                                <td>联系管理员分配相应权限</td>
                            </tr>
                            <tr>
                                <td><code>404</code></td>
                                <td>资源不存在</td>
                                <td>请求的资源不存在</td>
                                <td>检查请求的URL是否正确</td>
                            </tr>
                            <tr>
                                <td><code>429</code></td>
                                <td>请求过于频繁</td>
                                <td>超过了API调用频率限制</td>
                                <td>降低请求频率或联系管理员</td>
                            </tr>
                            <tr>
                                <td><code>500</code></td>
                                <td>服务器内部错误</td>
                                <td>服务器处理请求时发生错误</td>
                                <td>稍后重试或联系技术支持</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 使用示例 -->
        <section class="usage-examples">
            <div class="container">
                <h2 class="section-title">使用示例</h2>
                
                <div class="example-tabs">
                    <div class="tab-buttons">
                        <button class="tab-btn active" onclick="switchTab('curl')">cURL</button>
                        <button class="tab-btn" onclick="switchTab('javascript')">JavaScript</button>
                        <button class="tab-btn" onclick="switchTab('python')">Python</button>
                        <button class="tab-btn" onclick="switchTab('rust')">Rust</button>
                    </div>
                    
                    <div class="tab-content">
                        <div id="curl" class="tab-pane active">
                            <h3>cURL 示例</h3>
                            <div class="code-block-container">
                                <div class="code-block-header">登录请求</div>
                                <pre><code class="language-bash">curl -X POST https://api.kefu-system.com/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "kefu001",
    "password": "123456"
  }'</code></pre>
                            </div>
                        </div>
                        
                        <div id="javascript" class="tab-pane">
                            <h3>JavaScript 示例</h3>
                            <div class="code-block-container">
                                <div class="code-block-header">登录请求</div>
                                <pre><code class="language-javascript">const response = await fetch('https://api.kefu-system.com/v1/auth/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    username: 'kefu001',
    password: '123456'
  })
});

const data = await response.json();
console.log(data);</code></pre>
                            </div>
                        </div>
                        
                        <div id="python" class="tab-pane">
                            <h3>Python 示例</h3>
                            <div class="code-block-container">
                                <div class="code-block-header">登录请求</div>
                                <pre><code class="language-python">import requests

response = requests.post(
    'https://api.kefu-system.com/v1/auth/login',
    json={
        'username': 'kefu001',
        'password': '123456'
    }
)

data = response.json()
print(data)</code></pre>
                            </div>
                        </div>
                        
                        <div id="rust" class="tab-pane">
                            <h3>Rust 示例</h3>
                            <div class="code-block-container">
                                <div class="code-block-header">登录请求</div>
                                <pre><code class="language-rust">use reqwest;
use serde_json::json;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let client = reqwest::Client::new();
    
    let response = client
        .post("https://api.kefu-system.com/v1/auth/login")
        .json(&json!({
            "username": "kefu001",
            "password": "123456"
        }))
        .send()
        .await?;
    
    let data: serde_json::Value = response.json().await?;
    println!("{:?}", data);
    
    Ok(())
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>客服系统</h4>
                    <p>企业级实时客服解决方案</p>
                </div>
                <div class="footer-section">
                    <h4>文档</h4>
                    <ul>
                        <li><a href="index.html">API文档</a></li>
                        <li><a href="../user-guide/index.html">用户指南</a></li>
                        <li><a href="../technical/index.html">技术文档</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>支持</h4>
                    <ul>
                        <li><a href="../technical/troubleshooting.html">故障排除</a></li>
                        <li><a href="../technical/faq.html">常见问题</a></li>
                        <li><a href="https://github.com/Gaoce8888/rust1.0.1">GitHub</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>版本</h4>
                    <p>当前版本: v1.3.0</p>
                    <p>最后更新: 2025-07-21</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 客服系统. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <!-- 返回顶部按钮 -->
    <button id="backToTop" class="back-to-top" onclick="scrollToTop()">↑</button>

    <!-- JavaScript -->
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/prism.js"></script>
    
    <!-- 标签页切换脚本 -->
    <script>
        function switchTab(tabName) {
            // 隐藏所有标签页内容
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // 移除所有标签按钮的active状态
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 显示选中的标签页
            document.getElementById(tabName).classList.add('active');
            
            // 激活对应的按钮
            event.target.classList.add('active');
        }
    </script>
</body>
</html>