<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>企业级客服系统 - 项目文档</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            margin-bottom: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .version {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .nav {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .nav a {
            text-decoration: none;
            color: #667eea;
            font-weight: 500;
            padding: 10px 20px;
            border: 2px solid #667eea;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .nav a:hover {
            background: #667eea;
            color: white;
        }
        
        .section {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        h3 {
            color: #764ba2;
            margin: 20px 0 10px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .tree {
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
        }
        
        .tree-item {
            padding: 2px 0;
        }
        
        .tree-folder {
            color: #667eea;
            font-weight: bold;
        }
        
        .tree-file {
            color: #666;
            margin-left: 20px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-item {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            min-width: 150px;
        }
        
        .stat-number {
            font-size: 2em;
            color: #667eea;
            font-weight: bold;
        }
        
        .stat-label {
            color: #666;
            margin-top: 5px;
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        
        .tech-tag {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        
        .links {
            margin-top: 20px;
        }
        
        .links a {
            display: inline-block;
            margin-right: 20px;
            color: #667eea;
            text-decoration: none;
        }
        
        .links a:hover {
            text-decoration: underline;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            color: #666;
        }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        .highlight {
            background: #fffbdd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .success { color: #28a745; }
        .warning { color: #ffc107; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🚀 企业级客服系统</h1>
            <p class="version">版本 v2.1.0 | Enterprise Customer Service System</p>
        </header>
        
        <nav class="nav">
            <a href="#overview">项目概述</a>
            <a href="#structure">目录结构</a>
            <a href="#api">API文档</a>
            <a href="#frontend">前端说明</a>
            <a href="#backend">后端说明</a>
            <a href="#deployment">部署指南</a>
            <a href="#testing">测试报告</a>
        </nav>
        
        <section id="overview" class="section">
            <h2>📋 项目概述</h2>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">测试通过率</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">&lt;50ms</div>
                    <div class="stat-label">API响应时间</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">10,000+</div>
                    <div class="stat-label">并发连接</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">2</div>
                    <div class="stat-label">客户端类型</div>
                </div>
            </div>
            
            <h3>技术栈</h3>
            <div class="tech-stack">
                <span class="tech-tag">Rust</span>
                <span class="tech-tag">Warp</span>
                <span class="tech-tag">WebSocket</span>
                <span class="tech-tag">Redis</span>
                <span class="tech-tag">React</span>
                <span class="tech-tag">TypeScript</span>
                <span class="tech-tag">Vite</span>
                <span class="tech-tag">HeroUI</span>
                <span class="tech-tag">Tailwind CSS</span>
            </div>
            
            <h3>核心功能</h3>
            <div class="grid">
                <div class="card">
                    <h4>💬 实时通信</h4>
                    <p>基于WebSocket的双向实时消息传输，支持文本、图片、文件等多种消息类型</p>
                </div>
                <div class="card">
                    <h4>👥 智能分配</h4>
                    <p>自动将客户分配给在线客服，支持负载均衡和会话保持</p>
                </div>
                <div class="card">
                    <h4>🔐 安全认证</h4>
                    <p>客服端需要登录认证，支持会话管理和权限控制</p>
                </div>
                <div class="card">
                    <h4>📊 监控统计</h4>
                    <p>实时监控系统状态，提供详细的统计分析功能</p>
                </div>
            </div>
        </section>
        
        <section id="structure" class="section">
            <h2>📁 目录结构</h2>
            
            <div class="tree">
                <div class="tree-item">
                    <span class="tree-folder">📁 rust-chat-1.0.1/</span>
                </div>
                <div class="tree-item">
                    <span class="tree-file">├── 📁 src/</span> <span class="info">- Rust源代码</span>
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   ├── 📁 auth/</span> - 认证模块
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   ├── 📁 handlers/</span> - HTTP处理器
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   ├── 📁 routes/</span> - 路由配置
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   ├── 📁 websocket/</span> - WebSocket处理
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   └── 📄 main.rs</span> - 主程序入口
                </div>
                <div class="tree-item">
                    <span class="tree-file">├── 📁 static/</span> <span class="info">- 静态资源</span>
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   ├── 📁 kefu-react/</span> - 客服端前端
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   └── 📁 kehu-react/</span> - 客户端前端
                </div>
                <div class="tree-item">
                    <span class="tree-file">├── 📁 docs/</span> <span class="info">- 项目文档</span>
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   ├── 📁 api/</span> - API文档
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   ├── 📁 reports/</span> - 测试报告
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   └── 📄 index.html</span> - 本文档
                </div>
                <div class="tree-item">
                    <span class="tree-file">├── 📁 tests/</span> <span class="info">- 测试文件</span>
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   ├── 📁 scripts/</span> - 测试脚本
                </div>
                <div class="tree-item">
                    <span class="tree-file">│   └── 📁 reports/</span> - 测试结果
                </div>
                <div class="tree-item">
                    <span class="tree-file">├── 📁 data/</span> <span class="info">- 数据存储</span>
                </div>
                <div class="tree-item">
                    <span class="tree-file">├── 📁 logs/</span> <span class="info">- 日志文件</span>
                </div>
                <div class="tree-item">
                    <span class="tree-file">├── 📁 target/</span> <span class="info">- 编译输出</span>
                </div>
                <div class="tree-item">
                    <span class="tree-file">└── 📄 Cargo.toml</span> - Rust项目配置
                </div>
            </div>
        </section>
        
        <section id="api" class="section">
            <h2>🔌 API文档</h2>
            
            <h3>认证接口</h3>
            <div class="grid">
                <div class="card">
                    <h4>POST /api/kefu/login</h4>
                    <p>客服登录接口</p>
                    <code>{"username": "kefu001", "password": "123456"}</code>
                </div>
                <div class="card">
                    <h4>POST /api/kefu/logout</h4>
                    <p>客服登出接口</p>
                    <code>?kefu_id=kf001</code>
                </div>
                <div class="card">
                    <h4>GET /api/kefu/status</h4>
                    <p>获取客服状态</p>
                    <span class="success">✅ 无需参数</span>
                </div>
            </div>
            
            <h3>WebSocket接口</h3>
            <div class="card">
                <h4>ws://localhost:6006/ws</h4>
                <p><strong>连接参数：</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><code>user_id</code> - 用户ID</li>
                    <li><code>user_type</code> - 用户类型 (kefu/kehu)</li>
                    <li><code>user_name</code> - 用户名称</li>
                    <li><code>session_token</code> - 会话令牌 (仅客服需要)</li>
                </ul>
                <p style="margin-top: 10px;"><strong>支持的消息类型：</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Chat - 聊天消息</li>
                    <li>Heartbeat - 心跳消息</li>
                    <li>Typing - 打字状态</li>
                    <li>GetOnlineUsers - 获取在线用户</li>
                </ul>
            </div>
            
            <div class="links">
                <a href="reports/COMPREHENSIVE_API_TEST_REPORT.md">📊 查看完整API测试报告</a>
                <a href="reports/FRONTEND_BACKEND_CONSISTENCY_REPORT.md">🔍 查看前后端一致性报告</a>
            </div>
        </section>
        
        <section id="frontend" class="section">
            <h2>🎨 前端说明</h2>
            
            <div class="grid">
                <div class="card">
                    <h4>客服端 (kefu-react)</h4>
                    <p><strong>访问地址：</strong> <code>http://localhost:6006/kefu/</code></p>
                    <p><strong>默认账号：</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>kefu001 / 123456 (客服小王)</li>
                        <li>kefu002 / 123456 (客服小李)</li>
                        <li>kefu003 / 123456 (客服小张)</li>
                    </ul>
                    <p style="margin-top: 10px;"><strong>主要功能：</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>实时接收客户消息</li>
                        <li>管理多个会话</li>
                        <li>发送文本、图片、文件</li>
                        <li>查看客户信息</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h4>客户端 (kehu-react)</h4>
                    <p><strong>访问地址：</strong> <code>http://localhost:6006/kehu/</code></p>
                    <p><strong>特点：</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>无需登录，自动分配客服</li>
                        <li>简洁的聊天界面</li>
                        <li>支持发送多种消息类型</li>
                        <li>消息状态提示</li>
                    </ul>
                </div>
            </div>
            
            <h3>构建命令</h3>
            <div class="card">
                <p><strong>开发模式：</strong></p>
                <code>cd static/kefu-react && npm run dev</code>
                <p style="margin-top: 10px;"><strong>生产构建：</strong></p>
                <code>cd static/kefu-react && npm run build</code>
            </div>
        </section>
        
        <section id="backend" class="section">
            <h2>⚙️ 后端说明</h2>
            
            <h3>技术架构</h3>
            <div class="grid">
                <div class="card">
                    <h4>🦀 Rust + Warp</h4>
                    <p>高性能异步Web框架，基于Tokio运行时</p>
                </div>
                <div class="card">
                    <h4>🔴 Redis</h4>
                    <p>会话存储和实时数据缓存</p>
                </div>
                <div class="card">
                    <h4>💾 Sled</h4>
                    <p>嵌入式数据库，用于持久化存储</p>
                </div>
            </div>
            
            <h3>启动命令</h3>
            <div class="card">
                <p><strong>编译项目：</strong></p>
                <code>cargo build --release</code>
                <p style="margin-top: 10px;"><strong>运行服务：</strong></p>
                <code>./target/release/kefu-system</code>
                <p style="margin-top: 10px;"><strong>开发模式：</strong></p>
                <code>cargo run</code>
            </div>
            
            <h3>配置说明</h3>
            <div class="card">
                <p><strong>服务器配置：</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>HTTP端口: 6006</li>
                    <li>WebSocket路径: /ws</li>
                    <li>Redis: localhost:6379</li>
                    <li>数据目录: ./data</li>
                </ul>
            </div>
        </section>
        
        <section id="deployment" class="section">
            <h2>🚀 部署指南</h2>
            
            <h3>快速启动</h3>
            <div class="card">
                <h4>1. 启动Redis</h4>
                <code>redis-server</code>
            </div>
            <div class="card">
                <h4>2. 启动后端服务</h4>
                <code>cd /root/gaoce8888/rust-chat-1.0.1 && ./target/release/kefu-system</code>
            </div>
            <div class="card">
                <h4>3. 访问系统</h4>
                <p>客服端: <a href="http://localhost:6006/kefu/">http://localhost:6006/kefu/</a></p>
                <p>客户端: <a href="http://localhost:6006/kehu/">http://localhost:6006/kehu/</a></p>
            </div>
            
            <h3>生产环境建议</h3>
            <ul style="margin-left: 20px;">
                <li>使用Nginx反向代理</li>
                <li>配置SSL证书</li>
                <li>启用Redis持久化</li>
                <li>配置日志轮转</li>
                <li>设置系统监控</li>
            </ul>
        </section>
        
        <section id="testing" class="section">
            <h2>🧪 测试报告</h2>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number success">58</div>
                    <div class="stat-label">测试通过</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number error">0</div>
                    <div class="stat-label">测试失败</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number warning">5</div>
                    <div class="stat-label">跳过测试</div>
                </div>
            </div>
            
            <h3>测试脚本</h3>
            <div class="grid">
                <div class="card">
                    <h4>API测试</h4>
                    <code>node tests/scripts/api-test-suite.mjs</code>
                    <p style="margin-top: 10px;">测试所有HTTP API接口</p>
                </div>
                <div class="card">
                    <h4>WebSocket测试</h4>
                    <code>node tests/scripts/websocket-test-suite.mjs</code>
                    <p style="margin-top: 10px;">测试WebSocket连接和消息</p>
                </div>
            </div>
            
            <div class="links">
                <a href="reports/PROJECT_REPORT.md">📄 查看项目详细报告</a>
                <a href="reports/API_TEST_REPORT.json">📊 查看API测试数据</a>
                <a href="reports/WEBSOCKET_TEST_REPORT.json">📊 查看WebSocket测试数据</a>
            </div>
        </section>
        
        <footer>
            <p>© 2025 企业级客服系统 | 使用 Rust + React 构建 | <span class="highlight">v2.1.0</span></p>
        </footer>
    </div>
</body>
</html>